{
  "name": "icompressor",
  "version": "1.0.0",
  "description": "Cross-platform desktop file compressor - compress and extract archives",
  "main": "dist/main/main.js",
  "author": "iCompressor",
  "license": "MIT",
  "scripts": {
    "postinstall": "node scripts/fix-7zip-permissions.js",
    "build": "tsc && npm run bundle-renderer && npm run copy-renderer",
    "bundle-renderer": "node scripts/bundle-renderer.js",
    "copy-renderer": "node scripts/copy-renderer.js",
    "start": "npm run build && electron .",
    "dev": "npm run build && electron . --dev",
    "pack": "electron-builder --dir",
    "dist": "npm run build && electron-builder"
  },
  "devDependencies": {
    "@types/node": "^20.10.0",
    "electron": "^28.0.0",
    "electron-builder": "^24.9.1",
    "esbuild": "^0.19.12",
    "typescript": "^5.3.2"
  },
  "dependencies": {
    "7zip-bin": "^5.2.0",
    "archiver": "^6.0.1",
    "node-7z": "^3.0.0",
    "tar-stream": "^3.1.7"
  },
  "build": {
    "appId": "com.icompressor.app",
    "productName": "iCompressor",
    "directories": {
      "output": "release"
    },
    "files": [
      "dist/**/*",
      "src/renderer/**/*"
    ],
    "mac": {
      "target": [
        "dmg",
        "zip"
      ],
      "category": "public.app-category.utilities",
      "extendInfo": {
        "CFBundleDocumentTypes": [
          {
            "CFBundleTypeName": "ZIP Archive",
            "CFBundleTypeExtensions": ["zip"],
            "CFBundleTypeRole": "Viewer",
            "LSHandlerRank": "Alternate"
          },
          {
            "CFBundleTypeName": "7-Zip Archive",
            "CFBundleTypeExtensions": ["7z"],
            "CFBundleTypeRole": "Viewer",
            "LSHandlerRank": "Alternate"
          },
          {
            "CFBundleTypeName": "RAR Archive",
            "CFBundleTypeExtensions": ["rar"],
            "CFBundleTypeRole": "Viewer",
            "LSHandlerRank": "Alternate"
          },
          {
            "CFBundleTypeName": "TAR Archive",
            "CFBundleTypeExtensions": ["tar"],
            "CFBundleTypeRole": "Viewer",
            "LSHandlerRank": "Alternate"
          },
          {
            "CFBundleTypeName": "Gzipped TAR Archive",
            "CFBundleTypeExtensions": ["tar.gz", "tgz"],
            "CFBundleTypeRole": "Viewer",
            "LSHandlerRank": "Alternate"
          }
        ],
        "NSServices": [
          {
            "NSMenuItem": { "default": "Compress with iCompressor" },
            "NSMessage": "compress",
            "NSSendTypes": ["NSFilenamesPboardType"],
            "NSRequiredContext": { "NSApplicationIdentifier": "com.icompressor.app" }
          },
          {
            "NSMenuItem": { "default": "Extract with iCompressor" },
            "NSMessage": "extract",
            "NSSendTypes": ["NSFilenamesPboardType"],
            "NSRequiredContext": { "NSApplicationIdentifier": "com.icompressor.app" }
          }
        ]
      }
    },
    "win": {
      "target": [
        "nsis",
        "portable"
      ]
    },
    "linux": {
      "target": [
        "AppImage",
        "deb"
      ]
    }
  }
}
